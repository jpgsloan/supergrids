# OUTPUTS:
#  O1: [CV 1]
#  O2: [CV 2]
#  O3: [CV 3]
#  O4: [CV 4]
#  O5: [CV 5]
#  O6: [CV 6]
#  O7: [CV 7]
#  O8: [CV 8]

# GATES:
#  G1: [Gate 1]
#  G2: [2]
#  G3: [3]
#  G4: [4]
#  G5: [5]
#  G6: [6]
#  G7: [7]
#  G8: [8]
#  G9: [Clock]
#  G10: [Reset]

# CONTROLLER 1:
#  B1.1: [Play]
#  B1.2: [Gates]
#  B1.3: [Reset]
#  B1.4: [Proj]
#  B1.5: [Step 1]
#  B1.6: [2]
#  B1.7: [9]
#  B1.8: [10]

# CONTROLLER 2:
#  B2.1: [Alt]
#  B2.2: [CV]
#  B2.3: [Groove]
#  B2.4: [Perf]
#  B2.5: [3]
#  B2.6: [4]
#  B2.7: [11]
#  B2.8: [12]

# CONTROLLER 3:
#  B3.1: [Select 1]
#  B3.2: [2]
#  B3.3: [5]
#  B3.4: [6]
#  B3.5: [5]
#  B3.6: [6]
#  B3.7: [13]
#  B3.8: [14]

# CONTROLLER 4:
#  B4.1: [3]
#  B4.2: [4]
#  B4.3: [7]
#  B4.4: [8]
#  B4.5: [7]
#  B4.6: [8]
#  B4.7: [15]
#  B4.8: [16]

[p2b8]
[p2b8]
[p2b8]
[p2b8]

# -------------------------------------------------
# Midi In
# -------------------------------------------------

# midiin
[midiin]
    channel = _MIDI_IN_CHANNEL + 1
    usb = 0
    notegap = 1
    notegate1 = _MIDI_IN_GATE_1
    notegate2 = _MIDI_IN_GATE_2
    notegate3 = _MIDI_IN_GATE_3
    notegate4 = _MIDI_IN_GATE_4
    notegate5 = _MIDI_IN_GATE_5
    notegate6 = _MIDI_IN_GATE_6
    notegate7 = _MIDI_IN_GATE_7
    notegate8 = _MIDI_IN_GATE_8
    clock = _MIDI_CLOCK
    stop = _MIDI_RESET

# -------------------------------------------------
# Mode Selector
# -------------------------------------------------

# # Button group for mode select of knobs
[buttongroup]
    minactive = 1
    maxactive = 1
    button1 = B1.2
    button2 = B2.1
    button3 = B2.2
    button4 = B1.4
    button5 = B2.3
    button6 = B2.4
    value1 = 1
    value2 = 2
    value3 = 3
    value4 = 4
    value5 = 5
    value6 = 6
    led1 = L1.2
    led2 = L2.1
    led3 = L2.2
    led4 = L1.4
    led5 = L2.3
    led6 = L2.4
    buttonpress = _MODE_PRESSED
    output = _KNOB_MODE_SELECT

[triggerdelay]
    input = _MODE_PRESSED
    delay = 0
    gatelength = 0.06
    output = _MODE_PRESSED_GATE

[logic]
    input1 = _MODE_PRESSED_GATE
    negated = _MODE_PRESSED_GATE_NEGATED

[compare]
    input = _KNOB_MODE_SELECT
    compare = 1
    ifequal = 1
    else = 0
    output = _IS_MAIN_GATES_MODE

[compare]
    input = _KNOB_MODE_SELECT
    compare = 2
    ifequal = 1
    else = 0
    output = _IS_ALT_GATES_MODE

[compare]
    input = _KNOB_MODE_SELECT
    compare = 3
    ifequal = 1
    else = 0
    output = _IS_CV_MODE

[compare]
    input = _KNOB_MODE_SELECT
    compare = 4
    ifequal = 1
    else = 0
    output = _IS_PROJECT_MODE

[compare]
    input = _KNOB_MODE_SELECT
    compare = 5
    ifequal = 1
    else = 0
    output = _IS_GRVE_MODE

[compare]
    input = _KNOB_MODE_SELECT
    compare = 6
    ifequal = 1
    else = 0
    output = _IS_PERFORMANCE_MODE

# -------------------------------------------------
# Project Mode
# -------------------------------------------------

[button]
    button = B1.3
    states = 0
    startvalue = 0
    longpress = _CLEAR_PROJECT

# # Clock
[pot]
    select = _IS_PROJECT_MODE
    reset = _CLEAR_PROJECT
    pot = P1.1
    outputscale = 0.4
    startvalue = 0.5
    notch = 0.1
    output = _RATE

[lfo]
    rate = 0.1 + _RATE # 30BPM to roughly 150BPM
    square = _INTERNAL_CLOCK_RAW

[compare]
    input = _RATE
    compare = 0.05
    ifless = 1
    else = 0
    output = _INT_OR_EXT_CLOCK

[switch]
    input1 = _INTERNAL_CLOCK_RAW
    input2 = _MIDI_CLOCK
    offset = _INT_OR_EXT_CLOCK
    output1 = _CLOCK_NON_STOP

# Play/Stop button
[button]
    button = B1.1
    onvalue = _CLOCK_NON_STOP
    offvalue = 0
    led = L1.1
    output = _STRAIGHT_CLOCK

# Clock delay in case you need to compensate for things like midi latency
[pot]
    select = _IS_PROJECT_MODE
    reset = _CLEAR_PROJECT
    pot = P2.1
    outputscale = 0.5
    startvalue = 0
    output = _CLOCK_DELAY

[triggerdelay]
    input = _STRAIGHT_CLOCK
    delay = _CLOCK_DELAY
    output = _MASTER_CLOCK

[copy]
    input = _MASTER_CLOCK
    output = G9

# Longpress reset button to clear everything
[button]
    button = B1.3
    states = 0
    startvalue = 0
    longpress = _INIT_G

[triggerdelay]
    input = _INIT_G
    delay = 0.05
    output = _INIT_ALT

[triggerdelay]
    input = _INIT_ALT
    delay = 0.05
    output = _INIT_ACC

# In order to clear all algoquencer states, we have to clear each page separately. these are cleared with the following triggers that come in delayed slighlty from each other. The triggers also determine briefly what page the algos are on. (Gates, Alternate Gates, Accents).
[mixer]
    input1 = _INIT_G
    input2 = _INIT_ALT
    input3 = _INIT_ACC
    output = _CLEAR_ALGOS

[copy]
    input = _CLEAR_ALGOS
    inverted = _CLEAR_ALGOS_INV

[copy]
    input = _CLEAR_ALGOS_INV * _IS_CV_MODE
    output = _IS_ACC_MODE

# Reset button
[button]
    button = B1.3
    states = 1
    led = L1.3
    output = _INTERNAL_RESET

[copy]
    input = _MIDI_RESET + _INTERNAL_RESET
    output = _RESET

[copy]
    input = _RESET
    output = G10

[pot]
    select = _IS_PROJECT_MODE
    reset = _CLEAR_PROJECT
    pot = P3.1
    outputscale = 15
    startvalue = 0
    output = _MIDI_IN_CHANNEL

[pot]
    select = _IS_PROJECT_MODE
    reset = _CLEAR_PROJECT
    pot = P4.1
    outputscale = 15
    startvalue = 0
    output = _MIDI_OUT_CHANNEL

# Clock div/mult per channel
[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_1 + 1
    multiply = _CLOCK_MULT_1 + 1
    output = _CLOCK_1

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_2 + 1
    multiply = _CLOCK_MULT_2 + 1
    output = _CLOCK_2

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_3 + 1
    multiply = _CLOCK_MULT_3 + 1
    output = _CLOCK_3

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_4 + 1
    multiply = _CLOCK_MULT_4 + 1
    output = _CLOCK_4

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_5 + 1
    multiply = _CLOCK_MULT_5 + 1
    output = _CLOCK_5

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_6 + 1
    multiply = _CLOCK_MULT_6 + 1
    output = _CLOCK_6

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_7 + 1
    multiply = _CLOCK_MULT_7 + 1
    output = _CLOCK_7

[clocktool]
    clock = _MASTER_CLOCK
    reset = _RESET
    divide = _CLOCK_DIV_8 + 1
    multiply = _CLOCK_MULT_8 + 1
    output = _CLOCK_8

# # POTS for CLOCK DIV/MULT
[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_1
    reset = _CLEAR_PROJECT * _ALGO_SEL_1
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_1
    righthalf = _CLOCK_MULT_1

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_2
    reset = _CLEAR_PROJECT * _ALGO_SEL_2
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_2
    righthalf = _CLOCK_MULT_2

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_3
    reset = _CLEAR_PROJECT * _ALGO_SEL_3
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_3
    righthalf = _CLOCK_MULT_3

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_4
    reset = _CLEAR_PROJECT * _ALGO_SEL_4
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_4
    righthalf = _CLOCK_MULT_4

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_5
    reset = _CLEAR_PROJECT * _ALGO_SEL_5
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_5
    righthalf = _CLOCK_MULT_5

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_6
    reset = _CLEAR_PROJECT * _ALGO_SEL_6
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_6
    righthalf = _CLOCK_MULT_6

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_7
    reset = _CLEAR_PROJECT * _ALGO_SEL_7
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_7
    righthalf = _CLOCK_MULT_7

[pot]
    select = _IS_PROJECT_MODE * _ALGO_SEL_8
    reset = _CLEAR_PROJECT * _ALGO_SEL_8
    pot = P1.2
    outputscale = 7
    startvalue = 0.5
    notch = 0.1
    lefthalf = _CLOCK_DIV_8
    righthalf = _CLOCK_MULT_8

# Buttongroup for selecting presets
[buttongroup]
    select = _IS_PROJECT_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    output = _PRESET_VALUE
    longpress = _PRESET_SAVE
    buttonpress = _PRESET_PRESSED

# -------------------------------------------------
# Groove Mode
# -------------------------------------------------

[button]
    button = B2.3 + B1.3
    startvalue = 0
    states = 0
    longpress = _CLEAR_GRVE

# POTS for timing
[pot]
    select = _IS_GRVE_MODE
    pot = P1.1
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_1

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_1
    output = _ALGO_TIM_1

[pot]
    select = _IS_GRVE_MODE
    pot = P2.1
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_2

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_2
    output = _ALGO_TIM_2

[pot]
    select = _IS_GRVE_MODE
    pot = P3.1
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_3

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_3
    output = _ALGO_TIM_3

[pot]
    select = _IS_GRVE_MODE
    pot = P4.1
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_4

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_4
    output = _ALGO_TIM_4

[pot]
    select = _IS_GRVE_MODE
    pot = P1.2
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_5

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_5
    output = _ALGO_TIM_5

[pot]
    select = _IS_GRVE_MODE
    pot = P2.2
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_6

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_6
    output = _ALGO_TIM_6

[pot]
    select = _IS_GRVE_MODE
    pot = P3.2
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_7

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_7
    output = _ALGO_TIM_7

[pot]
    select = _IS_GRVE_MODE
    pot = P4.2
    outputscale = 0.6
    notch = 0.1
    startvalue = 0.5
    reset = _CLEAR_GRVE
    output = _ALGO_TIM_OFFSET_8

[copy]
    input = -1 * 0.3 + _ALGO_TIM_OFFSET_8
    output = _ALGO_TIM_8

[random]
    clock = _CLOCK_1
    minimum = _GRVE_JITR_1 * -0.2
    maximum = _GRVE_JITR_1 * 0.2
    output = _GRVE_RAND_1

[random]
    clock = _CLOCK_2
    minimum = _GRVE_JITR_2 * -0.2
    maximum = _GRVE_JITR_2 * 0.2
    output = _GRVE_RAND_2

[random]
    clock = _CLOCK_3
    minimum = _GRVE_JITR_3 * -0.2
    maximum = _GRVE_JITR_3 * 0.2
    output = _GRVE_RAND_3

[random]
    clock = _CLOCK_4
    minimum = _GRVE_JITR_4 * -0.2
    maximum = _GRVE_JITR_4 * 0.2
    output = _GRVE_RAND_4

[random]
    clock = _CLOCK_5
    minimum = _GRVE_JITR_5 * -0.2
    maximum = _GRVE_JITR_5 * 0.2
    output = _GRVE_RAND_5

[random]
    clock = _CLOCK_6
    minimum = _GRVE_JITR_6 * -0.2
    maximum = _GRVE_JITR_6 * 0.2
    output = _GRVE_RAND_6

[random]
    clock = _CLOCK_7
    minimum = _GRVE_JITR_7 * -0.2
    maximum = _GRVE_JITR_7 * 0.2
    output = _GRVE_RAND_7

[random]
    clock = _CLOCK_8
    minimum = _GRVE_JITR_8 * -0.2
    maximum = _GRVE_JITR_8 * 0.2
    output = _GRVE_RAND_8

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_1
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_1 + _GRVE_RAND_1
    output = _TIM_CLOCK_1

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_2
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_2 + _GRVE_RAND_2
    output = _TIM_CLOCK_2

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_3
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_3 + _GRVE_RAND_3
    output = _TIM_CLOCK_3

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_4
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_4 + _GRVE_RAND_4
    output = _TIM_CLOCK_4

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_5
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_5 + _GRVE_RAND_5
    output = _TIM_CLOCK_5

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_6
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_6 + _GRVE_RAND_6
    output = _TIM_CLOCK_6

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_7
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_7 + _GRVE_RAND_7
    output = _TIM_CLOCK_7

# Adjust per step (up to 8 steps) timing PER CHANNEL!
[timing]
    clock = _CLOCK_8
    reset = _RESET
    timing1 = _ALGO_TIM_1 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing2 = _ALGO_TIM_2 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing3 = _ALGO_TIM_3 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing4 = _ALGO_TIM_4 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing5 = _ALGO_TIM_5 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing6 = _ALGO_TIM_6 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing7 = _ALGO_TIM_7 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    timing8 = _ALGO_TIM_8 * _GRVE_ATTEN_8 + _GRVE_RAND_8
    output = _TIM_CLOCK_8

# -------------------------------------------------
# Performance Mode
# -------------------------------------------------

# # Button for activity mode clear
[button]
    button = B2.4 + B1.3
    startvalue = 0
    states = 0
    longpress = _CLEAR_PERFORMANCE

# # POTS for Activity
[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P1.1
    else = P1.1
    output = _ACT_POT_1

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_1 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_1

[pot]
    select = _ACT_POT_SELECT_1 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_1
    startvalue = 0.5
    notch = 0.1
    output = _ACT_1

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P2.1
    else = P1.1
    output = _ACT_POT_2

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_2 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_2

[pot]
    select = _ACT_POT_SELECT_2 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_2
    startvalue = 0.5
    notch = 0.1
    output = _ACT_2

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P3.1
    else = P1.1
    output = _ACT_POT_3

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_3 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_3

[pot]
    select = _ACT_POT_SELECT_3 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_3
    startvalue = 0.5
    notch = 0.1
    output = _ACT_3

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P4.1
    else = P1.1
    output = _ACT_POT_4

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_4 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_4

[pot]
    select = _ACT_POT_SELECT_4 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_4
    startvalue = 0.5
    notch = 0.1
    output = _ACT_4

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P1.2
    else = P1.1
    output = _ACT_POT_5

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_5 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_5

[pot]
    select = _ACT_POT_SELECT_5 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_5
    startvalue = 0.5
    notch = 0.1
    output = _ACT_5

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P2.2
    else = P1.1
    output = _ACT_POT_6

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_6 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_6

[pot]
    select = _ACT_POT_SELECT_6 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_6
    startvalue = 0.5
    notch = 0.1
    output = _ACT_6

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P3.2
    else = P1.1
    output = _ACT_POT_7

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_7 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_7

[pot]
    select = _ACT_POT_SELECT_7 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_7
    startvalue = 0.5
    notch = 0.1
    output = _ACT_7

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = P4.2
    else = P1.1
    output = _ACT_POT_8

[copy]
    input = _IS_GATES_MODE * _ALGO_SEL_8 + _IS_PERFORMANCE_MODE
    output = _ACT_POT_SELECT_8

[pot]
    select = _ACT_POT_SELECT_8 * _MODE_PRESSED_GATE_NEGATED
    reset = _CLEAR_PERFORMANCE + _CLEAR_GATES_MODE
    pot = _ACT_POT_8
    startvalue = 0.5
    notch = 0.1
    output = _ACT_8

# Latch button
[button]
    select = _IS_PERFORMANCE_MODE
    button = B1.5
    onvalue = 2
    offvalue = 1
    startvalue = 0
    led = L1.5
    output = _SHOULD_LATCH

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B1.6
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L1.6
    output = _SELECT_FILL_1

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B2.5
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L2.5
    output = _SELECT_FILL_2

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B2.6
    onvalue = 1
    offvalue = 0
    states = 1
    startvalue = 0
    led = L2.6

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B3.5
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L3.5
    output = _SELECT_FILL_3

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B3.6
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L3.6
    output = _SELECT_FILL_4

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B4.5
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L4.5
    output = _SELECT_FILL_5

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B4.6
    onvalue = 1
    offvalue = 0
    states = 1
    startvalue = 0
    led = L4.6

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B1.7
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L1.7
    output = _SELECT_1

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B1.8
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L1.8
    output = _SELECT_9

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B2.7
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L2.7
    output = _SELECT_3

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B2.8
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L2.8
    output = _SELECT_11

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B3.7
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L3.7
    output = _SELECT_5

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B3.8
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L3.8
    output = _SELECT_13

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B4.7
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L4.7
    output = _SELECT_7

[button]
    select = _IS_PERFORMANCE_MODE
    reset = _IS_PERFORMANCE_MODE * B1.5
    button = B4.8
    onvalue = 1
    offvalue = 0
    states = _SHOULD_LATCH
    startvalue = 0
    led = L4.8
    output = _SELECT_1_OCT

# Create half-lit chromatic keyboard on the step button leds
[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L1.7 + 0.2
    else = L1.7
    output = L1.7

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L1.6 + 0.1
    else = L1.6
    output = L1.6

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L1.8 + 0.2
    else = L1.8
    output = L1.8

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L2.5 + 0.1
    else = L2.5
    output = L2.5

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L2.7 + 0.2
    else = L2.7
    output = L2.7

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L2.8 + 0.2
    else = L2.8
    output = L2.8

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L3.5 + 0.1
    else = L3.5
    output = L3.5

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L3.7 + 0.2
    else = L3.7
    output = L3.7

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L3.6 + 0.1
    else = L3.6
    output = L3.6

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L3.8 + 0.2
    else = L3.8
    output = L3.8

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L4.5 + 0.1
    else = L4.5
    output = L4.5

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L4.7 + 0.2
    else = L4.7
    output = L4.7

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = L4.8 + 0.2
    else = L4.8
    output = L4.8

# -------------------------------------------------
# Gates Mode
# -------------------------------------------------

[copy]
    input = _IS_MAIN_GATES_MODE + _IS_ALT_GATES_MODE
    output = _IS_GATES_MODE

[copy]
    input = B1.2 + B2.1
    output = _GATE_MODE_BUTTONS

[button]
    button = _GATE_MODE_BUTTONS + B1.3
    startvalue = 0
    states = 0
    longpress = _CLEAR_GATES_MODE

# # POTS for gate activity
# these are the same pots used already for Activity Mode,
# they are reordered appropriately when in gates mode
[copy]
    input = 8
    output = _NUM_PAT_VARI

# # POTS for variation
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P2.1
    startvalue = 0
    output = _VARI_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P2.1
    startvalue = 0
    output = _VARI_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P2.1
    startvalue = 0
    output = _VARI_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P2.1
    startvalue = 0
    output = _VARI_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P2.1
    startvalue = 0
    output = _VARI_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P2.1
    startvalue = 0
    output = _VARI_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P2.1
    startvalue = 0
    output = _VARI_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P2.1
    startvalue = 0
    output = _VARI_8

# # POTS for offbeats
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P3.1
    notch = 0.1
    startvalue = 0.5
    output = _OFFBEATS_8

# # POTS for Rolls
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P4.1
    startvalue = 0
    output = _ROLLS_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P4.1
    startvalue = 0
    output = _ROLLS_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P4.1
    startvalue = 0
    output = _ROLLS_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P4.1
    startvalue = 0
    output = _ROLLS_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P4.1
    startvalue = 0
    output = _ROLLS_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P4.1
    startvalue = 0
    output = _ROLLS_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P4.1
    startvalue = 0
    output = _ROLLS_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P4.1
    startvalue = 0
    output = _ROLLS_8

# # POTS for gates Deja Vu (pot value flipped for personal preference, to match things like activity or fills)
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _DEJAVU_8

# # POTS for Alternatebars
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P2.2
    startvalue = 0.5
    notch = 0.1
    outputscale = 7
    output = _ALTBARS_8

# # POTS for GROOVE VARIANCE
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_1
    righthalf = _GRVE_JITR_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_2
    righthalf = _GRVE_JITR_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_3
    righthalf = _GRVE_JITR_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_4
    righthalf = _GRVE_JITR_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_5
    righthalf = _GRVE_JITR_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_6
    righthalf = _GRVE_JITR_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_7
    righthalf = _GRVE_JITR_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P3.2
    outputscale = 1
    startvalue = 0.5
    notch = 0.1
    lefthalfinv = _GRVE_ATTEN_8
    righthalf = _GRVE_JITR_8

# # GATE LENGTH
[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_1
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_1
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_1

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_2
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_2
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_2

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_3
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_3
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_3

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_4
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_4
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_4

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_5
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_5
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_5

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_6
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_6
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_6

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_7
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_7
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_7

[pot]
    select = _IS_GATES_MODE * _ALGO_SEL_8
    reset = _CLEAR_GATES_MODE * _ALGO_SEL_8
    pot = P4.2
    startvalue = 0.3
    output = _GATE_LENGTH_8

# -------------------------------------------------
# CV mode
# -------------------------------------------------

[button]
    button = B2.2 + B1.3
    startvalue = 0
    states = 0
    longpress = _CLEAR_CV_MODE

# # POTS for cv activity
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P1.1
    startvalue = 0.5
    notch = 0.1
    output = _CV_ACT_8

# # POTS for cv variation
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P2.1
    startvalue = 0
    notch = 0.1
    output = _CV_VARI_8

# # POTS for base pitch
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P3.1
    outputscale = 0.5
    startvalue = 0.5
    notch = 0.1
    bipolar = _CV_BASE_8

# # POTS for pitch range
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P4.1
    outputscale = 0.5
    startvalue = 0.2
    notch = 0.1
    output = _CV_SPREAD_8

[copy]
    input = _CV_BASE_1 + _CV_SPREAD_1
    output = _CV_MAX_1

[copy]
    input = _CV_BASE_2 + _CV_SPREAD_2
    output = _CV_MAX_2

[copy]
    input = _CV_BASE_3 + _CV_SPREAD_3
    output = _CV_MAX_3

[copy]
    input = _CV_BASE_4 + _CV_SPREAD_4
    output = _CV_MAX_4

[copy]
    input = _CV_BASE_5 + _CV_SPREAD_5
    output = _CV_MAX_5

[copy]
    input = _CV_BASE_6 + _CV_SPREAD_6
    output = _CV_MAX_6

[copy]
    input = _CV_BASE_7 + _CV_SPREAD_7
    output = _CV_MAX_7

[copy]
    input = _CV_BASE_8 + _CV_SPREAD_8
    output = _CV_MAX_8

# # POTS for CV Deja Vu (pot value flipped for personal preference, to match things like activity or fills)
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P1.2
    outputscale = -1
    startvalue = 0
    slope = 2
    output = _CV_DEJAVU_8

# # POTS for pitch resolution
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P2.2
    outputscale = 1
    startvalue = 0.5
    output = _CV_RES_8

# # POTS for cv slew
[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P3.2
    outputscale = 0.4
    slope = 2
    startvalue = 0
    output = _ALGO_SLEW_8

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_1
    reset = _CLEAR_CV_MODE * _ALGO_SEL_1
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_1

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_2
    reset = _CLEAR_CV_MODE * _ALGO_SEL_2
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_2

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_3
    reset = _CLEAR_CV_MODE * _ALGO_SEL_3
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_3

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_4
    reset = _CLEAR_CV_MODE * _ALGO_SEL_4
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_4

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_5
    reset = _CLEAR_CV_MODE * _ALGO_SEL_5
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_5

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_6
    reset = _CLEAR_CV_MODE * _ALGO_SEL_6
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_6

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_7
    reset = _CLEAR_CV_MODE * _ALGO_SEL_7
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_7

[pot]
    select = _IS_CV_MODE * _ALGO_SEL_8
    reset = _CLEAR_CV_MODE * _ALGO_SEL_8
    pot = P4.2
    outputscale = 0.2
    notch = 0.05
    startvalue = 0
    output = _BYPASS_QUANTIZATION_8

# -------------------------------------------------
# Channel Selector
# -------------------------------------------------

[mixer]
    input1 = _IS_GRVE_MODE
    input2 = _IS_CV_MODE
    input3 = _IS_GATES_MODE
    output = _SHOULD_SHOW_ALGOS

[mixer]
    input1 = _IS_PROJECT_MODE
    input2 = _IS_GRVE_MODE
    input3 = _IS_CV_MODE
    input4 = _IS_GATES_MODE
    output = _SHOULD_SHOW_SELECTORS

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B3.1
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_1

[copy]
    input = B3.1
    inverted = _BUTTON_NEG_1

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B3.2
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_2

[copy]
    input = B3.2
    inverted = _BUTTON_NEG_2

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B4.1
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_3

[copy]
    input = B4.1
    inverted = _BUTTON_NEG_3

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B4.2
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_4

[copy]
    input = B4.2
    inverted = _BUTTON_NEG_4

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B3.3
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_5

[copy]
    input = B3.3
    inverted = _BUTTON_NEG_5

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B3.4
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_6

[copy]
    input = B3.4
    inverted = _BUTTON_NEG_6

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B4.3
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_7

[copy]
    input = B4.3
    inverted = _BUTTON_NEG_7

[button]
    select = _SHOULD_SHOW_SELECTORS
    doubleclickmode = 1
    button = B4.4
    onvalue = 1
    offvalue = 0
    startvalue = 0
    reset = _DOUBLE_CLICK_RESET
    output = _DOUBLE_CLICK_OUTPUT_8

[copy]
    input = B4.4
    inverted = _BUTTON_NEG_8

[mixer]
    input1 = _BUTTON_NEG_1 * _DOUBLE_CLICK_OUTPUT_1
    input2 = _BUTTON_NEG_2 * _DOUBLE_CLICK_OUTPUT_2
    input3 = _BUTTON_NEG_3 * _DOUBLE_CLICK_OUTPUT_3
    input4 = _BUTTON_NEG_4 * _DOUBLE_CLICK_OUTPUT_4
    input5 = _BUTTON_NEG_5 * _DOUBLE_CLICK_OUTPUT_5
    input6 = _BUTTON_NEG_6 * _DOUBLE_CLICK_OUTPUT_6
    input7 = _BUTTON_NEG_7 * _DOUBLE_CLICK_OUTPUT_7
    input8 = _BUTTON_NEG_8 * _DOUBLE_CLICK_OUTPUT_8
    maximum = _DOUBLE_CLICKED

[triggerdelay]
    input = _DOUBLE_CLICKED
    delay = 0.1
    gatelength = 0.01
    output = _DOUBLE_CLICK_RESET

[compare]
    input = _NUM_SELECTIONS + _NUM_BUTTONS_PRESSED
    compare = 0
    ifequal = 1
    else = _DOUBLE_CLICKED
    output = _DEFAULT_STATE_1

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B3.1 + _DEFAULT_STATE_1
    startvalue = B3.1
    reset = _RESET_CH_BUTTONS
    led = L3.1
    output = _ALGO_SEL_1

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B3.2 + _DOUBLE_CLICKED
    startvalue = B3.2
    reset = _RESET_CH_BUTTONS
    led = L3.2
    output = _ALGO_SEL_2

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B4.1 + _DOUBLE_CLICKED
    startvalue = B4.1
    reset = _RESET_CH_BUTTONS
    led = L4.1
    output = _ALGO_SEL_3

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B4.2 + _DOUBLE_CLICKED
    startvalue = B4.2
    reset = _RESET_CH_BUTTONS
    led = L4.2
    output = _ALGO_SEL_4

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B3.3 + _DOUBLE_CLICKED
    startvalue = B3.3
    reset = _RESET_CH_BUTTONS
    led = L3.3
    output = _ALGO_SEL_5

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B3.4 + _DOUBLE_CLICKED
    startvalue = B3.4
    reset = _RESET_CH_BUTTONS
    led = L3.4
    output = _ALGO_SEL_6

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B4.3 + _DOUBLE_CLICKED
    startvalue = B4.3
    reset = _RESET_CH_BUTTONS
    led = L4.3
    output = _ALGO_SEL_7

[button]
    select = _SHOULD_SHOW_SELECTORS
    button = B4.4 + _DOUBLE_CLICKED
    startvalue = B4.4
    reset = _RESET_CH_BUTTONS
    led = L4.4
    output = _ALGO_SEL_8

[buttongroup]
    select = _SHOULD_SHOW_SELECTORS
    button1 = B3.1
    button2 = B3.2
    button3 = B4.1
    button4 = B4.2
    button5 = B3.3
    button6 = B3.4
    button7 = B4.3
    button8 = B4.4
    buttonpress = _CH_BUTTON_PRESSED

[mixer]
    input1 = _ALGO_SEL_1
    input2 = _ALGO_SEL_2
    input3 = _ALGO_SEL_3
    input4 = _ALGO_SEL_4
    input5 = _ALGO_SEL_5
    input6 = _ALGO_SEL_6
    input7 = _ALGO_SEL_7
    input8 = _ALGO_SEL_8
    output = _NUM_SELECTIONS

[mixer]
    input1 = B3.1
    input2 = B3.2
    input3 = B4.1
    input4 = B4.2
    input5 = B3.3
    input6 = B3.4
    input7 = B4.3
    input8 = B4.4
    output = _NUM_BUTTONS_PRESSED

# only send a reset trigger IF there is only one button being pressed
[compare]
    input = _NUM_BUTTONS_PRESSED
    compare = 1
    ifgreater = 0
    else = 1
    output = _SHOULD_RESET_CH_BUTTONS

# # need to first find way to get number of buttons being held down.
# # if 2 or greater are held down, we know that we should NOT send a trigger to reset buttons.
# # otherwise send out a trigger to resets each time a button is pressed
# # exclude the currently held down button from getting reset.
[copy]
    input = _CH_BUTTON_PRESSED * _SHOULD_RESET_CH_BUTTONS
    output = _RESET_CH_BUTTONS

# -------------------------------------------------
# Algoquencers
# -------------------------------------------------

[algoquencer]
    select = _ALGO_SEL_1 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_1
    reset = _RESET
    mutebutton = B3.1 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_1 * _NUM_PAT_VARI + 20
    activity = _ACT_1
    variation = _VARI_1
    offbeats = _OFFBEATS_1
    rolls = _ROLLS_1
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_1 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_1 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_1 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_1
    trigger = _ALGO_TRIG_1
    muteled = _MUTE_LED_1
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    startofbar = G11

[triggerdelay]
    input = _ALGO_TRIG_1
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_1 + 0.07
    clock = _TIM_CLOCK_1
    output = _ALGO_GATE_1

[algoquencer]
    select = _ALGO_SEL_2 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_2
    reset = _RESET
    mutebutton = B3.2 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_2 * _NUM_PAT_VARI + 40
    activity = _ACT_2
    variation = _VARI_2
    offbeats = _OFFBEATS_2
    rolls = _ROLLS_2
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_2 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_2 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_2
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_2 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_2
    trigger = _ALGO_TRIG_2
    muteled = _MUTE_LED_2
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_2
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_2 + 0.07
    clock = _TIM_CLOCK_2
    output = _ALGO_GATE_2

[algoquencer]
    select = _ALGO_SEL_3 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_3
    reset = _RESET
    mutebutton = B4.1 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_3 * _NUM_PAT_VARI + 60
    activity = _ACT_3
    variation = _VARI_3
    offbeats = _OFFBEATS_3
    rolls = _ROLLS_3
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_3 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_3 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_3
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_3 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_3
    trigger = _ALGO_TRIG_3
    muteled = _MUTE_LED_3
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_3
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_3 + 0.07
    clock = _TIM_CLOCK_3
    output = _ALGO_GATE_3

[algoquencer]
    select = _ALGO_SEL_4 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_4
    reset = _RESET
    mutebutton = B4.2 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_4 * _NUM_PAT_VARI + 180 # algoquencer crashes at pattern=80, activity=1
    activity = _ACT_4
    variation = _VARI_4
    offbeats = _OFFBEATS_4
    rolls = _ROLLS_4
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_4 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_4 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_4
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_4 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_4
    trigger = _ALGO_TRIG_4
    muteled = _MUTE_LED_4
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_4
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_4 + 0.07
    clock = _TIM_CLOCK_4
    output = _ALGO_GATE_4

[algoquencer]
    select = _ALGO_SEL_5 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_5
    reset = _RESET
    mutebutton = B3.3 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_5 * _NUM_PAT_VARI + 100
    activity = _ACT_5
    variation = _VARI_5
    offbeats = _OFFBEATS_5
    rolls = _ROLLS_5
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_5 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_5 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_5
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_5 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_5
    trigger = _ALGO_TRIG_5
    muteled = _MUTE_LED_5
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_5
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_5 + 0.07
    clock = _TIM_CLOCK_5
    output = _ALGO_GATE_5

[algoquencer]
    select = _ALGO_SEL_6 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_6
    reset = _RESET
    mutebutton = B3.4 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_6 * _NUM_PAT_VARI + 120
    activity = _ACT_6
    variation = _VARI_6
    offbeats = _OFFBEATS_6
    rolls = _ROLLS_6
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_6 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_6 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_6
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_6 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_6
    trigger = _ALGO_TRIG_6
    muteled = _MUTE_LED_6
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_6
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_6 + 0.07
    clock = _TIM_CLOCK_6
    output = _ALGO_GATE_6

[algoquencer]
    select = _ALGO_SEL_7 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_7
    reset = _RESET
    mutebutton = B4.3 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_7 * _NUM_PAT_VARI + 140
    activity = _ACT_7
    variation = _VARI_7
    offbeats = _OFFBEATS_7
    rolls = _ROLLS_7
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_7 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_7 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_7
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_7 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_7
    trigger = _ALGO_TRIG_7
    muteled = _MUTE_LED_7
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_7
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_7 + 0.07
    clock = _TIM_CLOCK_7
    output = _ALGO_GATE_7

[algoquencer]
    select = _ALGO_SEL_8 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_8
    reset = _RESET
    mutebutton = B4.4 * _IS_PERFORMANCE_MODE
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _VARI_8 * _NUM_PAT_VARI + 160
    activity = _ACT_8
    variation = _VARI_8
    offbeats = _OFFBEATS_8
    rolls = _ROLLS_8
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_8 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _DEJAVU_8 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_8
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_8 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    accent = _ACCENT_8
    trigger = _ALGO_TRIG_8
    muteled = _MUTE_LED_8
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8

[triggerdelay]
    input = _ALGO_TRIG_8
    delay = 0
    repeats = 1
    gatelength = _GATE_LENGTH_8 + 0.07
    clock = _TIM_CLOCK_8
    output = _ALGO_GATE_8

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_1 * 0.2
    else = _MUTE_LED_1 * 0.2 + L3.1
    output = L3.1

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_2 * 0.2
    else = _MUTE_LED_2 * 0.2 + L3.2
    output = L3.2

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_3 * 0.2
    else = _MUTE_LED_3 * 0.2 + L4.1
    output = L4.1

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_4 * 0.2
    else = _MUTE_LED_4 * 0.2 + L4.2
    output = L4.2

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_5 * 0.2
    else = _MUTE_LED_5 * 0.2 + L3.3
    output = L3.3

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_6 * 0.2
    else = _MUTE_LED_6 * 0.2 + L3.4
    output = L3.4

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_7 * 0.2
    else = _MUTE_LED_7 * 0.2 + L4.3
    output = L4.3

[compare]
    input = _IS_PERFORMANCE_MODE
    compare = 1
    ifequal = _MUTE_LED_8 * 0.2
    else = _MUTE_LED_8 * 0.2 + L4.4
    output = L4.4

[copy]
    input = _ALGO_GATE_1 + _MIDI_IN_GATE_1
    output = G1

[copy]
    input = _ALGO_GATE_2 + _MIDI_IN_GATE_2
    output = G2

[copy]
    input = _ALGO_GATE_3 + _MIDI_IN_GATE_3
    output = G3

[copy]
    input = _ALGO_GATE_4 + _MIDI_IN_GATE_4
    output = G4

[copy]
    input = _ALGO_GATE_5 + _MIDI_IN_GATE_5
    output = G5

[copy]
    input = _ALGO_GATE_6 + _MIDI_IN_GATE_6
    output = G6

[copy]
    input = _ALGO_GATE_7 + _MIDI_IN_GATE_7
    output = G7

[copy]
    input = _ALGO_GATE_8 + _MIDI_IN_GATE_8
    output = G8

# Algoquencers for CV outputs
[algoquencer]
    select = _ALGO_SEL_1 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_1
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_1 * _NUM_PAT_VARI + 20
    activity = _CV_ACT_1
    variation = _CV_VARI_1
    offbeats = _OFFBEATS_1
    rolls = _ROLLS_1
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_1 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_1 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_1
    pitchlow = _CV_BASE_1
    pitchhigh = _CV_MAX_1
    pitchresolution = _CV_RES_1 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_1 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_1

[algoquencer]
    select = _ALGO_SEL_2 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_2
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_2 * _NUM_PAT_VARI + 40
    activity = _CV_ACT_2
    variation = _CV_VARI_2
    offbeats = _OFFBEATS_2
    rolls = _ROLLS_2
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_2 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_2 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_2
    pitchlow = _CV_BASE_2
    pitchhigh = _CV_MAX_2
    pitchresolution = _CV_RES_2 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_2 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_2

[algoquencer]
    select = _ALGO_SEL_3 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_3
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_3 * _NUM_PAT_VARI + 60
    activity = _CV_ACT_3
    variation = _CV_VARI_3
    offbeats = _OFFBEATS_3
    rolls = _ROLLS_3
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_3 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_3 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_3
    pitchlow = _CV_BASE_3
    pitchhigh = _CV_MAX_3
    pitchresolution = _CV_RES_3 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_3 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_3

[algoquencer]
    select = _ALGO_SEL_4 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_4
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_4 * _NUM_PAT_VARI + 180
    activity = _CV_ACT_4
    variation = _CV_VARI_4
    offbeats = _OFFBEATS_4
    rolls = _ROLLS_4
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_4 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_4 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_4
    pitchlow = _CV_BASE_4
    pitchhigh = _CV_MAX_4
    pitchresolution = _CV_RES_4 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_4 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_4

[algoquencer]
    select = _ALGO_SEL_5 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_5
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_5 * _NUM_PAT_VARI + 100
    activity = _CV_ACT_5
    variation = _CV_VARI_5
    offbeats = _OFFBEATS_5
    rolls = _ROLLS_5
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_5 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_5 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_5
    pitchlow = _CV_BASE_5
    pitchhigh = _CV_MAX_5
    pitchresolution = _CV_RES_5 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_5 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_5

[algoquencer]
    select = _ALGO_SEL_6 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_6
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_6 * _NUM_PAT_VARI + 120
    activity = _CV_ACT_6
    variation = _CV_VARI_6
    offbeats = _OFFBEATS_6
    rolls = _ROLLS_6
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_6 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_6 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_6
    pitchlow = _CV_BASE_6
    pitchhigh = _CV_MAX_6
    pitchresolution = _CV_RES_6 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_6 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_6

[algoquencer]
    select = _ALGO_SEL_7 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_7
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_7 * _NUM_PAT_VARI + 140
    activity = _CV_ACT_7
    variation = _CV_VARI_7
    offbeats = _OFFBEATS_7
    rolls = _ROLLS_7
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_7 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_7 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_7
    pitchlow = _CV_BASE_7
    pitchhigh = _CV_MAX_7
    pitchresolution = _CV_RES_7 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_7 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_7

[algoquencer]
    select = _ALGO_SEL_8 * _SHOULD_SHOW_ALGOS
    preset = _PRESET_VALUE
    loadpreset = _PRESET_PRESSED * B1.4
    savepreset = _PRESET_SAVE
    clock = _TIM_CLOCK_8
    reset = _RESET
    button1 = B1.5
    button2 = B1.6
    button3 = B2.5
    button4 = B2.6
    button5 = B3.5
    button6 = B3.6
    button7 = B4.5
    button8 = B4.6
    button9 = B1.7
    button10 = B1.8
    button11 = B2.7
    button12 = B2.8
    button13 = B3.7
    button14 = B3.8
    button15 = B4.7
    button16 = B4.8
    pattern = _CV_VARI_8 * _NUM_PAT_VARI + 160
    activity = _CV_ACT_8
    variation = _CV_VARI_8
    offbeats = _OFFBEATS_8
    rolls = _ROLLS_8
    rollcount = 1
    rollsteps = 1
    alternatebars = _ALTBARS_8 + 0.5
    alternatebutton = _IS_ALT_GATES_MODE * _CLEAR_ALGOS_INV + _INIT_ALT
    dejavu = _CV_DEJAVU_8 + 1
    lengthbutton = _IS_GRVE_MODE * _ALGO_SEL_8
    pitchlow = _CV_BASE_8
    pitchhigh = _CV_MAX_8
    pitchresolution = _CV_RES_8 * 30 + 1
    accentbutton = _IS_ACC_MODE * _ALGO_SEL_8 + _INIT_ACC
    accenthigh = 0.5
    clear = _CLEAR_ALGOS
    led1 = L1.5
    led2 = L1.6
    led3 = L2.5
    led4 = L2.6
    led5 = L3.5
    led6 = L3.6
    led7 = L4.5
    led8 = L4.6
    led9 = L1.7
    led10 = L1.8
    led11 = L2.7
    led12 = L2.8
    led13 = L3.7
    led14 = L3.8
    led15 = L4.7
    led16 = L4.8
    pitch = _CV_OUTPUT_8

[minifonion]
    bypass = _BYPASS_QUANTIZATION_1
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_1 + _ACCENT_1
    output = _CV_QUANT_1

[slew]
    input = _CV_QUANT_1
    slew = _ALGO_SLEW_1
    exponential = O1

[minifonion]
    bypass = _BYPASS_QUANTIZATION_2
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_2 + _ACCENT_2
    output = _CV_QUANT_2

[slew]
    input = _CV_QUANT_2
    slew = _ALGO_SLEW_2
    exponential = O2

[minifonion]
    bypass = _BYPASS_QUANTIZATION_3
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_3 + _ACCENT_3
    output = _CV_QUANT_3

[slew]
    input = _CV_QUANT_3
    slew = _ALGO_SLEW_3
    exponential = O3

[minifonion]
    bypass = _BYPASS_QUANTIZATION_4
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_4 + _ACCENT_4
    output = _CV_QUANT_4

[slew]
    input = _CV_QUANT_4
    slew = _ALGO_SLEW_4
    exponential = O4

[minifonion]
    bypass = _BYPASS_QUANTIZATION_5
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_5 + _ACCENT_5
    output = _CV_QUANT_5

[slew]
    input = _CV_QUANT_5
    slew = _ALGO_SLEW_5
    exponential = O5

[minifonion]
    bypass = _BYPASS_QUANTIZATION_6
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_6 + _ACCENT_6
    output = _CV_QUANT_6

[slew]
    input = _CV_QUANT_6
    slew = _ALGO_SLEW_6
    exponential = O6

[minifonion]
    bypass = _BYPASS_QUANTIZATION_7
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_7 + _ACCENT_7
    output = _CV_QUANT_7

[slew]
    input = _CV_QUANT_7
    slew = _ALGO_SLEW_7
    exponential = O7

[minifonion]
    bypass = _BYPASS_QUANTIZATION_8
    select1 = _SELECT_1 + _SELECT_1_OCT
    select3 = _SELECT_3
    select5 = _SELECT_5
    select7 = _SELECT_7
    select9 = _SELECT_9
    select11 = _SELECT_11
    select13 = _SELECT_13
    selectfill1 = _SELECT_FILL_1
    selectfill2 = _SELECT_FILL_2
    selectfill3 = _SELECT_FILL_3
    selectfill4 = _SELECT_FILL_4
    selectfill5 = _SELECT_FILL_5
    root = 0
    degree = 1
    input = _CV_OUTPUT_8 + _ACCENT_8
    output = _CV_QUANT_8

[slew]
    input = _CV_QUANT_8
    slew = _ALGO_SLEW_8
    exponential = O8

# -------------------------------------------------
# Midi Out
# -------------------------------------------------

[pot]
    select = _IS_PROJECT_MODE
    pot = P4.2
    outputscale = 8
    notch = 0.1
    output = _MIDI_NOTE_SEL

[compare]
    input = _MIDI_NOTE_SEL
    compare = 0.02
    ifless = 1
    else = 0
    output = _DRUMS

[compare]
    input = _MIDI_NOTE_SEL
    compare = 0.02
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_8

[compare]
    input = _MIDI_NOTE_SEL
    compare = 1
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_7

[compare]
    input = _MIDI_NOTE_SEL
    compare = 2
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_6

[compare]
    input = _MIDI_NOTE_SEL
    compare = 3
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_5

[compare]
    input = _MIDI_NOTE_SEL
    compare = 4
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_4

[compare]
    input = _MIDI_NOTE_SEL
    compare = 5
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_3

[compare]
    input = _MIDI_NOTE_SEL
    compare = 6
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_2

[compare]
    input = _MIDI_NOTE_SEL
    compare = 7
    ifgreater = 1
    else = 0
    output = _MIDI_SEL_1

[midiout]
    channel = _MIDI_OUT_CHANNEL + 1
    usb = 0
    pitch1 = _CV_QUANT_8 + 5V
    pitch2 = _CV_QUANT_7 + 5V
    pitch3 = _CV_QUANT_6 + 5V
    pitch4 = _CV_QUANT_5 + 5V
    pitch5 = _CV_QUANT_4 + 5V
    pitch6 = _CV_QUANT_3 + 5V
    pitch7 = _CV_QUANT_2 + 5V
    pitch8 = _CV_QUANT_1 + 5V
    gate1 = _ALGO_GATE_8 * _MIDI_SEL_8
    gate2 = _ALGO_GATE_7 * _MIDI_SEL_7
    gate3 = _ALGO_GATE_6 * _MIDI_SEL_6
    gate4 = _ALGO_GATE_5 * _MIDI_SEL_5
    gate5 = _ALGO_GATE_4 * _MIDI_SEL_4
    gate6 = _ALGO_GATE_3 * _MIDI_SEL_3
    gate7 = _ALGO_GATE_2 * _MIDI_SEL_2
    gate8 = _ALGO_GATE_1 * _MIDI_SEL_1
    notegate1 = G1 * _DRUMS
    notegate2 = G2 * _DRUMS
    notegate3 = G3 * _DRUMS
    notegate4 = G4 * _DRUMS
    notegate5 = G5 * _DRUMS
    notegate6 = G6 * _DRUMS
    notegate7 = G7 * _DRUMS
    notegate8 = G8 * _DRUMS
    cc1 = O1 + 5V
    cc2 = O2 + 5V
    cc3 = O3 + 5V
    cc4 = O4 + 5V
    cc5 = O5 + 5V
    cc6 = O6 + 5V
    cc7 = O7 + 5V
    cc8 = O8 + 5V
    ccnumber1 = 102
    ccnumber2 = 103
    ccnumber3 = 104
    ccnumber4 = 105
    ccnumber5 = 106
    ccnumber6 = 107
    ccnumber7 = 108
    ccnumber8 = 109
